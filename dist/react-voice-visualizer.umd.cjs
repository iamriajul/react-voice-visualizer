(function(){"use strict";(i=>{try{if(typeof window>"u")return;var e=document.createElement("style");e.appendChild(document.createTextNode(i)),document.head.appendChild(e)}catch(o){console.error("vite-plugin-css-injected-by-js",o)}})(".voice-visualizer__buttons-container{display:flex;justify-content:center;align-items:center;column-gap:20px;row-gap:15px;flex-wrap:wrap;margin-bottom:40px}.voice-visualizer__btn-center{box-sizing:border-box;flex-shrink:0;width:60px;height:60px;padding:0;display:flex;justify-content:center;align-items:center;border-radius:50%;background-color:#fff;border:4px solid #c5c5c5;outline:none;cursor:pointer;transition:border-color .3s,background-color .3s}.voice-visualizer__btn-center:disabled{opacity:.85;cursor:default}.voice-visualizer__btn-center:hover{background-color:#eaeaea;border:4px solid #9f9f9f}.voice-visualizer__btn-center>img{width:auto;height:50%;max-height:30px}.voice-visualizer__btn-center.voice-visualizer__btn-center-pause{background-color:#ff3030}.voice-visualizer__btn-center.voice-visualizer__btn-center-pause:hover{background-color:#ff4f4f}.voice-visualizer__btn-center.voice-visualizer__btn-center-pause>img{height:50%;max-height:16px}.voice-visualizer__btn-center.voice-visualizer__btn-center--border-transparent{border-color:transparent}.voice-visualizer__btn-center.voice-visualizer__btn-center--border-transparent:hover{background-color:#fff}.voice-visualizer__btn-left{box-sizing:border-box;flex-shrink:0;width:60px;height:60px;padding:0;display:flex;justify-content:center;align-items:center;border-radius:50%;background-color:#ff3030;border:4px solid #c5c5c5;outline:none;cursor:pointer;transition:border-color .3s,background-color .3s,opacity .3s}.voice-visualizer__btn-container{min-width:100px;display:flex;justify-content:flex-end}.voice-visualizer__btn-left:hover{background-color:#ff4f4f}.voice-visualizer__btn-left:disabled{opacity:.6;background-color:#ff3030;cursor:default}.voice-visualizer__btn-left.voice-visualizer__btn-left-microphone{background-color:#fff}.voice-visualizer__btn-left.voice-visualizer__btn-left-microphone>img{width:auto;height:50%;max-height:30px}.voice-visualizer__btn-left>img{width:auto;height:50%;max-height:16px}.voice-visualizer__btn-left:hover{border:4px solid #9f9f9f}.voice-visualizer__btn{box-sizing:border-box;min-width:100px;min-height:60px;padding:5px 20px;border-radius:40px;font-size:15px;background-color:#f0f0f0;transition:background-color .3s,opacity .3s}.voice-visualizer__btn:disabled{opacity:.8;background-color:#f0f0f0;cursor:default}.voice-visualizer__btn:hover{background-color:#bebebe}.voice-visualizer__canvas-container{position:relative;width:fit-content;margin:0 auto;overflow:hidden}.voice-visualizer__canvas-container canvas{display:block}.voice-visualizer__canvas-microphone-btn{position:absolute;top:50%;left:50%;width:auto;max-width:12%;min-width:24px;height:50%;max-height:100px;background-color:transparent;border:none;outline:none;transform:translate(-50%,-50%)}.voice-visualizer__canvas-microphone-icon{width:100%;height:100%;will-change:transform;transition:transform .3s}.voice-visualizer__canvas-microphone-btn:hover .voice-visualizer__canvas-microphone-icon{transform:scale(1.03)}.voice-visualizer__canvas-audio-wave-icon{position:absolute;top:50%;left:50%;width:auto;max-width:40%;height:40%;max-height:100px;transform:translate(-118%,-50%) scale(-1)}.voice-visualizer__canvas-audio-wave-icon2{transform:translate(18%,-50%)}.voice-visualizer__canvas-audio-processing{position:absolute;top:50%;left:50%;margin:0;transform:translate(-50%,-50%)}.voice-visualizer__progress-indicator-hovered{position:absolute;top:0;pointer-events:none;height:100%;width:1px;background-color:#85858599}.voice-visualizer__progress-indicator-hovered-time{position:absolute;top:3%;left:1px;width:fit-content;margin:0;padding:0 7px;opacity:.8;font-size:12px;border-radius:0 4px 4px 0;background-color:#575757;text-align:left}.voice-visualizer__progress-indicator-hovered-time.voice-visualizer__progress-indicator-hovered-time-left{left:unset;right:1px;border-radius:4px 0 0 4px}.voice-visualizer__progress-indicator{position:absolute;top:0;pointer-events:none;height:100%;width:1px;background-color:#efefef}.voice-visualizer__progress-indicator-time{position:absolute;top:3%;left:1px;width:fit-content;box-sizing:border-box;min-width:37px;margin:0;padding:0 7px;font-size:12px;border-radius:0 4px 4px 0;text-align:left;color:#000;font-weight:500;background-color:#efefef}.voice-visualizer__progress-indicator-time.voice-visualizer__progress-indicator-time-left{left:unset;right:1px;border-radius:4px 0 0 4px}.voice-visualizer__audio-info-container{box-sizing:border-box;height:55px;display:flex;align-items:center;justify-content:center;gap:30px}.voice-visualizer__audio-info-time{margin:15px 0;min-width:38px;text-align:left}.voice-visualizer__visually-hidden{position:absolute;width:1px;height:1px;margin:-1px;padding:0;border:4px solid #c5c5c5;white-space:nowrap;clip-path:inset(100%);clip:rect(0 0 0 0);overflow:hidden}.relative{position:relative}.spinner__wrapper{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:52px;height:52px;display:flex;justify-content:center;align-items:center}.spinner{flex-shrink:0;width:100%;height:100%;border:4px solid rgba(197,197,197,.5);border-radius:50%;border-top-color:#b7b7b7;animation:spin 1s ease-in-out infinite;-webkit-animation:spin 1s ease-in-out infinite}@keyframes spin{to{transform:rotate(360deg)}}@-webkit-keyframes spin{to{transform:rotate(360deg)}}")})();
(function(_,s){typeof exports=="object"&&typeof module<"u"?s(exports,require("react/jsx-runtime"),require("react")):typeof define=="function"&&define.amd?define(["exports","react/jsx-runtime","react"],s):(_=typeof globalThis<"u"?globalThis:_||self,s(_["react-voice-visualizer"]={},_["react/jsx-runtime"],_.React))})(this,function(_,s,t){"use strict";const be=({canvas:e,backgroundColor:r})=>{const i=e.height,n=e.width,o=Math.round(n/2),m=e.getContext("2d");return m?(m.clearRect(0,0,n,i),r!=="transparent"&&(m.fillStyle=r,m.fillRect(0,0,n,i)),{context:m,height:i,width:n,halfWidth:o}):null},Ie=({context:e,color:r,rounded:i,x:n,y:o,w:m,h:g})=>{e.fillStyle=r,e.beginPath(),e.roundRect?(e.roundRect(n,o,m,g,i),e.fill()):e.fillRect(n,o,m,g)},ke=({barsData:e,canvas:r,barWidth:i,gap:n,backgroundColor:o,mainBarColor:m,secondaryBarColor:g,currentAudioTime:f=0,rounded:M,duration:z})=>{const L=be({canvas:r,backgroundColor:o});if(!L)return;const{context:I,height:w}=L,N=f/z;e.forEach((d,l)=>{const S=l/e.length,v=N>S;Ie({context:I,color:v?g:m,rounded:M,x:l*(i+n*i),y:w/2-d.max,h:d.max*2,w:i})})};function Ve({context:e,color:r,rounded:i,width:n,height:o,barWidth:m}){Ie({context:e,color:r,rounded:i,x:n/2+m/2,y:o/2-1,h:2,w:n-(n/2+m/2)})}const Re=({audioData:e,unit:r,index:i,index2:n,canvas:o,isRecordingInProgress:m,isPausedRecording:g,picks:f,backgroundColor:M,barWidth:z,mainBarColor:L,secondaryBarColor:I,rounded:w,animateCurrentPick:N,fullscreen:d})=>{const l=be({canvas:o,backgroundColor:M});if(!l)return;const{context:S,height:v,width:O,halfWidth:Z}=l;if(e!=null&&e.length&&m){const E=Math.max(...e);if(!g){if(n.current>=z){n.current=0;const y=(v-E/258*v)/v*100,K=(-v+E/258*v*2)/v*100,P=i.current===z?{startY:y,barHeight:K}:null;i.current>=r?i.current=z:i.current+=z,f.length>(d?O:Z)/z&&f.pop(),f.unshift(P)}n.current+=1}!d&&G(),N&&Ie({context:S,rounded:w,color:L,x:d?O:Z,y:v-E/258*v,h:-v+E/258*v*2,w:z});let X=(d?O:Z)-n.current;f.forEach(y=>{y&&Ie({context:S,color:L,rounded:w,x:X,y:y.startY*v/100>v/2-1?v/2-1:y.startY*v/100,h:y.barHeight*v/100>2?y.barHeight*v/100:2,w:z}),X-=z})}else f.length=0;function G(){Ve({context:S,color:I,rounded:w,width:O,height:v,barWidth:z})}},$e=e=>{const r=Math.floor(e/3600),i=Math.floor(e%3600/60),n=e%60,o=Math.floor((n-Math.floor(n))*1e3);return r>0?`${String(r).padStart(2,"0")}:${String(i).padStart(2,"0")}:${String(Math.floor(n)).padStart(2,"0")}:${String(o).charAt(0)}`:i>0?`${String(i).padStart(2,"0")}:${String(Math.floor(n)).padStart(2,"0")}:${String(o).charAt(0)}`:`${String(Math.floor(n)).padStart(2,"0")}:${String(o).charAt(0)}`},Je=e=>{const r=Math.floor(e/1e3),i=Math.floor(r/3600),n=Math.floor(r%3600/60),o=r%60;return i>0?`${String(i).padStart(2,"0")}:${String(n).padStart(2,"0")}:${String(o).padStart(2,"0")}`:`${String(n).padStart(2,"0")}:${String(o).padStart(2,"0")}`};function Oe(e){if(typeof e=="string"){const r=Number(e);if(!Number.isNaN(r))return`${Math.trunc(r/2)*2}px`}return e}const Qe=({bufferData:e,height:r,width:i,barWidth:n,gap:o})=>{const m=i/(n+o*n),g=Math.floor(e.length/m),f=r/2;let M=[],z=0;for(let L=0;L<m;L++){const I=[];let w=0;for(let d=0;d<g&&L*g+d<e.length;d++){const l=e[L*g+d];l>0&&(I.push(l),w++)}const N=I.reduce((d,l)=>d+l,0)/w;N>z&&(z=N),M.push({max:N})}if(f*.95>z*f){const L=f*.95/z;M=M.map(I=>({max:I.max>.01?I.max*L:1}))}return M},qe=e=>{if(!e)return"";const r=e.match(/audio\/([^;]+)/);return r&&r.length>=2?`.${r[1]}`:""},Xe=e=>{const r=Math.floor(e/3600),i=Math.floor(e%3600/60),n=e%60,o=Math.floor((n-Math.floor(n))*1e3);return r>0?`${String(r).padStart(2,"0")}:${String(i).padStart(2,"0")}:${String(Math.floor(n)).padStart(2,"0")}}h`:i>0?`${String(i).padStart(2,"0")}:${String(Math.floor(n)).padStart(2,"0")}m`:`${String(Math.floor(n)).padStart(2,"0")}:${String(o).charAt(0)}${String(o).charAt(1)}s`},Ke=e=>{onmessage=r=>{postMessage(e(r.data))}};function et({fn:e,initialValue:r,onMessageReceived:i}){const[n,o]=t.useState(r);return{result:n,setResult:o,run:g=>{const f=new Worker(URL.createObjectURL(new Blob([`(${Ke})(${e})`])));f.onmessage=M=>{M.data&&(o(M.data),i&&i(),f.terminate())},f.onerror=M=>{console.error(M.message),f.terminate()},f.postMessage(g)}}}const tt=(e,r=250)=>{const i=t.useRef();return t.useCallback((...n)=>{const o=()=>{clearTimeout(i.current),e(...n)};clearTimeout(i.current),i.current=setTimeout(o,r)},[e,r])};function rt(e){const r=t.useRef(e);return t.useLayoutEffect(()=>{r.current=e},[e]),r}const zt="",nt=({color:e="#000000",stroke:r=2,className:i})=>s.jsx("svg",{viewBox:"0 0 23 33",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:i,children:s.jsx("path",{d:"M1.1 16.72c0 3 .96 5.8 3.61 7.95a9.96 9.96 0 0 0 6.5 2.17m0 0v4.34h4.34-8.67m4.34-4.34c2.35 0 4.42-.48 6.5-2.17a9.87 9.87 0 0 0 3.61-7.95M11.22 1.82c-1.45 0-2.5.37-3.3.93a5.6 5.6 0 0 0-1.84 2.4c-.9 2.06-1.1 4.77-1.1 7.24 0 2.46.2 5.17 1.1 7.24a5.6 5.6 0 0 0 1.84 2.4c.8.55 1.85.92 3.3.92 1.44 0 2.5-.37 3.29-.93a5.6 5.6 0 0 0 1.84-2.4c.9-2.06 1.1-4.77 1.1-7.23 0-2.47-.2-5.18-1.1-7.24a5.6 5.6 0 0 0-1.84-2.4 5.52 5.52 0 0 0-3.3-.93Z",stroke:e,strokeWidth:r,strokeLinecap:"round",strokeLinejoin:"round"})}),Ze=({color:e="#FFFFFF",reflect:r})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0.92 17.54 48.27 14.92",className:`voice-visualizer__canvas-audio-wave-icon ${r?"voice-visualizer__canvas-audio-wave-icon2":""}`,children:s.jsx("path",{d:"M.92 24.63h.21v.75H.92zm.42-1.39h.21v3.52h-.21zm.43.68h.21v2.17h-.21zM2.2 22h.21v6.01H2.2zm.43-1.27h.21v8.55h-.21zm.43 2.07h.21v4.4h-.21zm.43 1.22h.21v1.97h-.21zm.43.47h.21v1.03h-.21zm.43-1.66h.21v4.35h-.21zm.43-1.74h.21v7.82h-.21zm.43 1.94h.21v3.94h-.21zm.43 1.07h.21v1.81h-.21zm.42-.94h.21v3.68h-.21zm.43.91h.21v1.86h-.21zm.43-.23h.21v2.33h-.21zm.43.46h.21v1.4h-.21zm.43-.7h.21v2.8h-.21zm.43-1.6h.21v6.01h-.21zm.43-2.23h.21v10.46h-.21zm.43-1.4h.21v13.26h-.21zm.43.62h.21v12.02H9.5zm.43 1.64h.21v8.75h-.21zm.43 1.37h.21v6.01h-.21zm.43-1.87H11v9.74h-.21zm.42 1.32h.21v7.1h-.21zm.43-2.64h.21v12.38h-.21zm.43 1.61h.21v9.17h-.21zM12.5 22h.21v6.01h-.21zm.43 1.32h.21v3.37h-.21zm.43-2.51h.21v8.39h-.21zm.43.59H14v7.2h-.21zm.43 1.79h.21v3.62h-.21zm.43.41h.21v2.8h-.21zm.43.57h.21v1.66h-.21zm.43-1.11h.21v3.88h-.21zm.42-2.98h.21v9.84h-.21zm.43 1.06h.21v7.72h-.21zm.43 3.19H17v1.35h-.21zm.86-2.33h.21v6.01h-.21zm-.43 1.4h.21v3.21h-.21zm1.29.15h.21v2.9h-.21zm.43.68h.21v1.55h-.21zm-.86-.76h.21v3.05h-.21zm1.29-.05h.21v3.16h-.21zm.43-.64h.21v4.45h-.21zm.43.38h.21v3.68h-.21zm.42-.49h.21v4.66h-.21zm.43 1.32h.21v2.02h-.21zm.43.37h.21v1.29h-.21zm.43.31h.21v.67h-.21zm.43-.39h.21v1.45h-.21zm.43-1.35h.21v4.14h-.21zm.86.73h.21v2.69h-.21zm-.43.44h.21v1.81h-.21zm1.29-3.45h.21v8.7h-.21zm.43 1.71h.21v5.28h-.21zm-.86-2.3h.21v9.89h-.21zm1.29 3.36h.21v3.16h-.21zM25.8 22h.21v6.01h-.21zm.43 1.42h.21v3.16h-.21zm.43.88h.21v1.4h-.21zm.43-.93h.21v3.26h-.21zm.43-1.37h.21v6.01h-.21zm.43-.93h.21v7.87h-.21zm.43-.76h.21v9.38h-.21zm.43 1.69h.21v6.01h-.21zm.86 1.92h.21v2.17h-.21zm-.43-.6h.21v3.37h-.21zm1.28.05h.21v3.26h-.21zm.43.67h.21v1.91h-.21zm-.85-.51h.21v2.95h-.21zm1.28-.13h.21v3.21h-.21zm.43-1.4h.21v6.01h-.21zm.43-.99h.21v7.98h-.21zm.43 1.77h.21v4.45h-.21zm.43-1.22h.21v6.89h-.21zm.43 1.6h.21v3.68h-.21zm.43-.28h.21v4.25h-.21zm.43-.6h.21v5.44h-.21zm.43-.28h.21v6.01h-.21zm.85 2.02h.21v1.97h-.21zm-.43-.57h.21v3.11h-.21zm1.29.93h.21v1.24h-.21zm.43-.65h.21v2.54h-.21zm-.86-.28h.21v3.11h-.21zm1.29.83h.21v1.45h-.21zm.43-.99h.21v3.42h-.21zm.43-.1h.21v3.62h-.21zm.43-.7h.21v5.02h-.21zm.43.8h.21v3.42h-.21zm.43-1.29h.21v6.01h-.21zm.42-1.71h.21v9.43h-.21zm.43 2.38h.21v4.66h-.21zm.43.65h.21v3.37h-.21zm.86.08h.21v3.21h-.21zm-.43.54h.21v2.12h-.21zm1.29-.05h.21v2.23h-.21zm.43.28h.21v1.66h-.21zm-.86.16h.21v1.35h-.21zm1.29.21h.21v.93h-.21zm.43-6.04h.21v13h-.21zm.43.8h.21v11.4h-.21zm.43-1.76h.21v14.92h-.21zm.42 1.09h.21v12.74h-.21zm.43 1.17h.21v10.41h-.21zm.43 1.32h.21v7.77h-.21zm.43 1.6h.21v4.56h-.21zm.43 1.17h.21v2.23h-.21zm.86-.08h.21v2.38h-.21zm-.43-.34h.21v3.05h-.21zm1.29-.1h.21v3.26h-.21zm.43.93h.21v1.4h-.21zm-.86-.02h.21v1.45h-.21z",fill:e})}),Fe="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjMiIGhlaWdodD0iMzMiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTEuMSAxNi43MmMwIDMgLjk2IDUuOCAzLjYxIDcuOTVhOS45NiA5Ljk2IDAgMCAwIDYuNSAyLjE3bTAgMHY0LjM0aDQuMzQtOC42N200LjM0LTQuMzRjMi4zNSAwIDQuNDItLjQ4IDYuNS0yLjE3YTkuODcgOS44NyAwIDAgMCAzLjYxLTcuOTVNMTEuMjIgMS44MmMtMS40NSAwLTIuNS4zNy0zLjMuOTNhNS42IDUuNiAwIDAgMC0xLjg0IDIuNGMtLjkgMi4wNi0xLjEgNC43Ny0xLjEgNy4yNCAwIDIuNDYuMiA1LjE3IDEuMSA3LjI0YTUuNiA1LjYgMCAwIDAgMS44NCAyLjRjLjguNTUgMS44NS45MiAzLjMuOTIgMS40NCAwIDIuNS0uMzcgMy4yOS0uOTNhNS42IDUuNiAwIDAgMCAxLjg0LTIuNGMuOS0yLjA2IDEuMS00Ljc3IDEuMS03LjIzIDAtMi40Ny0uMi01LjE4LTEuMS03LjI0YTUuNiA1LjYgMCAwIDAtMS44NC0yLjQgNS41MiA1LjUyIDAgMCAwLTMuMy0uOTNaIiBzdHJva2U9IiMwMDAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPgo8L3N2Zz4K",it="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjYiIGhlaWdodD0iMjQiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTE4Ljc1IDYuMTZjNC4zMSAyLjYgNi40NiAzLjkgNi40NiA1Ljg0IDAgMS45NS0yLjE1IDMuMjQtNi40NiA1Ljg0bC00Ljg0IDIuOTJjLTQuMzEgMi42LTYuNDYgMy44OS04LjA4IDIuOTItMS42Mi0uOTgtMS42Mi0zLjU3LTEuNjItOC43NlY5LjA4YzAtNS4xOSAwLTcuNzggMS42Mi04Ljc2IDEuNjItLjk3IDMuNzcuMzMgOC4wOCAyLjkybDQuODQgMi45MloiIGZpbGw9IiNmZmYiLz4KPC9zdmc+Cg==",Ue="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjEiIGhlaWdodD0iMjkiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTE0IDMuNWEzLjUgMy41IDAgMSAxIDcgMHYyMmEzLjUgMy41IDAgMSAxLTcgMHYtMjJaIiBmaWxsPSIjZmZmIi8+CiAgPHJlY3Qgd2lkdGg9IjciIGhlaWdodD0iMjkiIHJ4PSIzLjUiIGZpbGw9IiNmZmYiLz4KPC9zdmc+Cg==",st="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjciIGhlaWdodD0iMjUiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHJlY3QgeD0iLjIxIiB3aWR0aD0iMjYiIGhlaWdodD0iMjUiIHJ4PSI1IiBmaWxsPSIjZmZmIi8+Cjwvc3ZnPgo=",ct=t.forwardRef(({controls:{audioData:e,isRecordingInProgress:r,recordedBlob:i,duration:n,currentAudioTime:o,audioSrc:m,bufferFromRecordedBlob:g,togglePauseResume:f,startRecording:M,stopRecording:z,saveAudioFile:L,isAvailableRecordedAudio:I,isPausedRecordedAudio:w,isPausedRecording:N,isProcessingStartRecording:d,isProcessingRecordedAudio:l,isCleared:S,formattedDuration:v,formattedRecordingTime:O,formattedRecordedAudioCurrentTime:Z,clearCanvas:G,setCurrentAudioTime:E,isProcessingOnResize:X,_setIsProcessingOnResize:y,_setIsProcessingAudioOnComplete:K},width:P="100%",height:we=200,speed:ee=3,backgroundColor:C="transparent",mainBarColor:A="#FFFFFF",secondaryBarColor:W="#5e5e5e",barWidth:te=2,gap:B=1,rounded:k=5,isControlPanelShown:_e=!0,isDownloadAudioButtonShown:re=!1,animateCurrentPick:ne=!0,fullscreen:F=!1,onlyRecording:x=!1,isDefaultUIShown:he=!0,defaultMicrophoneIconColor:Le=A,defaultAudioWaveIconColor:le=A,mainContainerClassName:me,canvasContainerClassName:ie,isProgressIndicatorShown:Ne=!x,progressIndicatorClassName:se,isProgressIndicatorTimeShown:p=!0,progressIndicatorTimeClassName:H,isProgressIndicatorOnHoverShown:V=!x,progressIndicatorOnHoverClassName:ce,isProgressIndicatorTimeOnHoverShown:R=!0,progressIndicatorTimeOnHoverClassName:D,isAudioProcessingTextShown:b=!0,audioProcessingTextClassName:a,controlButtonsClassName:ve},Ce)=>{const[fe,xe]=t.useState(0),[T,ye]=t.useState(0),[de,He]=t.useState(0),[J,ze]=t.useState(0),[Q,je]=t.useState(!1),[Ae,q]=t.useState(window.innerWidth),[Te,De]=t.useState(!1),oe=Ae<768,ue=Math.trunc(ee),c=Math.trunc(B),h=Math.trunc(oe&&c>0?te+1:te),$=h+c*h,u=t.useRef(null),ge=t.useRef([]),Ee=t.useRef(ue),ut=t.useRef(h),at=t.useRef(h),Me=t.useRef(null),U=Ce,ht=rt(Ae),{result:Se,setResult:lt,run:mt}=et({fn:Qe,initialValue:[],onMessageReceived:ft}),vt=tt(ae);t.useEffect(()=>{ae(),setTimeout(ae,100),setTimeout(ae,500),setTimeout(ae,1e3);const j=()=>{ht.current!==window.innerWidth&&(I?(q(window.innerWidth),y(!0),De(!0),vt()):(q(window.innerWidth),ae()))};return window.addEventListener("resize",j),()=>{window.removeEventListener("resize",j)}},[P,I]),t.useLayoutEffect(()=>{u.current&&((Ee.current>=ue||!e.length)&&(Ee.current=e.length?0:ue,Re({audioData:e,unit:$,index:ut,index2:at,canvas:u.current,picks:ge.current,isRecordingInProgress:r,isPausedRecording:N,backgroundColor:C,mainBarColor:A,secondaryBarColor:W,barWidth:h,rounded:k,animateCurrentPick:ne,fullscreen:F})),Ee.current+=1)},[u.current,e,h,C,A,W,k,F,he,J]),t.useEffect(()=>{var j,Y;if(I)return Q?(j=u.current)==null||j.addEventListener("mouseleave",Ge):(Y=u.current)==null||Y.addEventListener("mouseenter",Ye),()=>{var pe,Be;Q?(pe=u.current)==null||pe.removeEventListener("mouseleave",Ge):(Be=u.current)==null||Be.removeEventListener("mouseenter",Ye)}},[Q,I]),t.useEffect(()=>{var Y;if(!g||!u.current||r||Te)return;if(x){G();return}ge.current=[];const j=g.getChannelData(0);return mt({bufferData:j,height:de,width:J,barWidth:h,gap:c}),(Y=u.current)==null||Y.addEventListener("mousemove",Pe),()=>{var pe;(pe=u.current)==null||pe.removeEventListener("mousemove",Pe)}},[g,T,de,B,te,Te]),t.useEffect(()=>{if(!(x||!(Se!=null&&Se.length)||!u.current||l)){if(S){lt([]);return}ke({barsData:Se,canvas:u.current,barWidth:h,gap:c,backgroundColor:C,mainBarColor:A,secondaryBarColor:W,currentAudioTime:o,rounded:k,duration:n})}},[Se,o,S,k,C,A,W]),t.useEffect(()=>{l&&u.current&&be({canvas:u.current,backgroundColor:C})},[l]);function ae(){if(!Me.current||!u.current)return;Ee.current=ue;const j=Math.trunc(Me.current.clientHeight*window.devicePixelRatio/2)*2;ye(Me.current.clientWidth),He(j),ze(Math.round(Me.current.clientWidth*window.devicePixelRatio)),De(!1)}function ft(){y(!1),K(!1),U!=null&&U.current&&!X&&(U.current.src=m)}const Ye=()=>{je(!0)},Ge=()=>{je(!1)},Pe=j=>{xe(j.offsetX)},dt=j=>{if(U!=null&&U.current&&u.current){const Y=n/T*(j.clientX-u.current.getBoundingClientRect().left);U.current.currentTime=Y,E(Y)}},We=o/n*T;return s.jsxs("div",{className:`voice-visualizer ${me??""}`,children:[s.jsxs("div",{className:`voice-visualizer__canvas-container ${ie??""}`,ref:Me,style:{width:Oe(P)},children:[s.jsx("canvas",{ref:u,width:J,height:de,onClick:dt,style:{height:Oe(we),width:T},children:"Your browser does not support HTML5 Canvas."}),he&&S&&s.jsxs(s.Fragment,{children:[s.jsx(Ze,{color:le}),s.jsx(Ze,{color:le,reflect:!0}),s.jsx("button",{type:"button",onClick:M,className:"voice-visualizer__canvas-microphone-btn",children:s.jsx(nt,{color:Le,stroke:.5,className:"voice-visualizer__canvas-microphone-icon"})})]}),b&&l&&s.jsx("p",{className:`voice-visualizer__canvas-audio-processing ${a??""}`,style:{color:A},children:"Processing Audio..."}),Q&&I&&!l&&!oe&&V&&s.jsx("div",{className:`voice-visualizer__progress-indicator-hovered ${ce??""}`,style:{left:fe},children:R&&s.jsx("p",{className:`voice-visualizer__progress-indicator-hovered-time 
                    ${T-fe<70?"voice-visualizer__progress-indicator-hovered-time-left":""} 
                    ${D??""}`,children:$e(n/T*fe)})}),Ne&&I&&!l&&n?s.jsx("div",{className:`voice-visualizer__progress-indicator ${se??""}`,style:{left:We<T-1?We:T-1},children:p&&s.jsx("p",{className:`voice-visualizer__progress-indicator-time ${T-o*T/n<70?"voice-visualizer__progress-indicator-time-left":""} ${H??""}`,children:Z})}):null]}),_e&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"voice-visualizer__audio-info-container",children:[r&&s.jsx("p",{className:"voice-visualizer__audio-info-time",children:O}),n&&!l?s.jsx("p",{children:v}):null]}),s.jsxs("div",{className:"voice-visualizer__buttons-container",children:[r&&s.jsx("div",{className:"voice-visualizer__btn-container",children:s.jsx("button",{type:"button",className:`voice-visualizer__btn-left ${N?"voice-visualizer__btn-left-microphone":""}`,onClick:f,children:s.jsx("img",{src:N?Fe:Ue,alt:N?"Play":"Pause"})})}),!S&&s.jsx("button",{type:"button",className:`voice-visualizer__btn-left ${r||d?"voice-visualizer__visually-hidden":""}`,onClick:f,disabled:l,children:s.jsx("img",{src:w?it:Ue,alt:w?"Play":"Pause"})}),S&&s.jsxs("button",{type:"button",className:`voice-visualizer__btn-center relative ${d?"voice-visualizer__btn-center--border-transparent":""}`,onClick:M,disabled:d,children:[d&&s.jsx("div",{className:"spinner__wrapper",children:s.jsx("div",{className:"spinner"})}),s.jsx("img",{src:Fe,alt:"Microphone"})]}),s.jsx("button",{type:"button",className:`voice-visualizer__btn-center voice-visualizer__btn-center-pause ${r?"":"voice-visualizer__visually-hidden"}`,onClick:z,children:s.jsx("img",{src:st,alt:"Stop"})}),!S&&s.jsx("button",{type:"button",onClick:G,className:`voice-visualizer__btn ${ve??""}`,disabled:l,children:"Clear"}),re&&i&&s.jsx("button",{type:"button",onClick:L,className:`voice-visualizer__btn ${ve??""}`,disabled:l,children:"Download Audio"})]})]})]})});function ot({onStartRecording:e,onStopRecording:r,onPausedRecording:i,onResumedRecording:n,onClearCanvas:o,onEndAudioPlayback:m,onStartAudioPlayback:g,onPausedAudioPlayback:f,onResumedAudioPlayback:M,onErrorPlayingAudio:z,mediaRecorderOptions:L,audioTrackConstraints:I}={}){const[w,N]=t.useState(!1),[d,l]=t.useState(!1),[S,v]=t.useState(null),[O,Z]=t.useState(new Uint8Array(0)),[G,E]=t.useState(!1),[X,y]=t.useState(null),[K,P]=t.useState(null),[we,ee]=t.useState(0),[C,A]=t.useState(0),[W,te]=t.useState(0),[B,k]=t.useState(""),[_e,re]=t.useState(!0),[ne,F]=t.useState(0),[x,he]=t.useState(!0),[Le,le]=t.useState(!1),[me,ie]=t.useState(null),[Ne,se]=t.useState(!1),p=t.useRef(null),H=t.useRef(null),V=t.useRef(null),ce=t.useRef(null),R=t.useRef(null),D=t.useRef(null),b=t.useRef(null),a=t.useRef(null),ve=!!(K&&!G),Ce=Xe(W),fe=Je(we),xe=$e(ne),T=Le||G;t.useEffect(()=>{if(!w||d)return;const h=setInterval(()=>{const $=performance.now();ee(u=>u+($-C)),A($)},1e3);return()=>clearInterval(h)},[C,d,w]),t.useEffect(()=>{if(me){q();return}},[me]),t.useEffect(()=>()=>{q()},[]),t.useEffect(()=>(x||window.addEventListener("beforeunload",ye),()=>{window.removeEventListener("beforeunload",ye)}),[x]);const ye=c=>{c.preventDefault(),c.returnValue=""},de=async c=>{if(c)try{if(c.size===0)throw new Error("Error: The audio blob is empty");const h=URL.createObjectURL(c);k(h);const $=await c.arrayBuffer(),ge=await new AudioContext().decodeAudioData($);P(ge),te(ge.duration-.06),ie(null)}catch(h){console.error("Error processing the audio blob:",h),ie(h instanceof Error?h:new Error("Error processing the audio blob"))}},He=()=>{se(!0),navigator.mediaDevices.getUserMedia({audio:I??!0}).then(c=>{he(!1),se(!1),N(!0),A(performance.now()),v(c),H.current=new window.AudioContext,V.current=H.current.createAnalyser(),ce.current=new Uint8Array(V.current.frequencyBinCount),R.current=H.current.createMediaStreamSource(c),R.current.connect(V.current),p.current=new MediaRecorder(c,L),p.current.addEventListener("dataavailable",ze),p.current.start(),e&&e(),J()}).catch(c=>{se(!1),ie(c instanceof Error?c:new Error("Error starting audio recording"))})},J=()=>{V.current.getByteTimeDomainData(ce.current),Z(new Uint8Array(ce.current)),D.current=requestAnimationFrame(J)},ze=c=>{p.current&&(p.current=null,a.current=new Audio,y(c.data),de(c.data))},Q=()=>{a.current&&(F(a.current.currentTime),b.current=requestAnimationFrame(Q))},je=()=>{w||Ne||(x||q(),He())},Ae=()=>{w&&(N(!1),p.current&&(p.current.stop(),p.current.removeEventListener("dataavailable",ze)),S==null||S.getTracks().forEach(c=>c.stop()),D.current&&cancelAnimationFrame(D.current),R.current&&R.current.disconnect(),H.current&&H.current.state!=="closed"&&H.current.close(),E(!0),ee(0),l(!1),r&&r())},q=()=>{D.current&&(cancelAnimationFrame(D.current),D.current=null),b.current&&(cancelAnimationFrame(b.current),b.current=null),p.current&&(p.current.removeEventListener("dataavailable",ze),p.current.stop(),p.current=null),S==null||S.getTracks().forEach(c=>c.stop()),a!=null&&a.current&&(a.current.removeEventListener("ended",oe),a.current.pause(),a.current.src="",a.current=null),H.current=null,V.current=null,ce.current=null,R.current=null,v(null),se(!1),N(!1),E(!1),y(null),P(null),ee(0),A(0),te(0),k(""),F(0),re(!0),l(!1),le(!1),Z(new Uint8Array(0)),ie(null),he(!0),o&&o()},Te=()=>{if(a.current&&a.current.paused){const c=a.current.play();c!==void 0&&c.catch(h=>{console.error(h),z&&z(h instanceof Error?h:new Error("Error playing audio"))})}},De=()=>{var c,h,$;if(w){l(u=>!u),((c=p.current)==null?void 0:c.state)==="recording"?((h=p.current)==null||h.pause(),ee(u=>u+(performance.now()-C)),D.current&&cancelAnimationFrame(D.current),i&&i()):(D.current=requestAnimationFrame(J),($=p.current)==null||$.resume(),A(performance.now()),n&&n());return}if(a.current&&ve)if(a.current.paused)requestAnimationFrame(Q),Te(),a.current.addEventListener("ended",oe),re(!1),g&&ne===0&&g(),M&&ne!==0&&M();else{b.current&&cancelAnimationFrame(b.current),a.current.removeEventListener("ended",oe),a.current.pause(),re(!0);const u=a.current.currentTime;F(u),a.current.currentTime=u,f&&f()}},oe=()=>{b.current&&cancelAnimationFrame(b.current),re(!0),a!=null&&a.current&&(a.current.currentTime=0,F(0),m&&m())},ue=()=>{var h;if(!B)return;const c=document.createElement("a");c.href=B,c.download=`recorded_audio${qe((h=p.current)==null?void 0:h.mimeType)}`,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(B)};return{audioRef:a,isRecordingInProgress:w,isPausedRecording:d,audioData:O,recordingTime:we,isProcessingRecordedAudio:T,recordedBlob:X,mediaRecorder:p.current,duration:W,currentAudioTime:ne,audioSrc:B,isPausedRecordedAudio:_e,bufferFromRecordedBlob:K,isCleared:x,isAvailableRecordedAudio:ve,formattedDuration:Ce,formattedRecordingTime:fe,formattedRecordedAudioCurrentTime:xe,startRecording:je,togglePauseResume:De,stopRecording:Ae,saveAudioFile:ue,clearCanvas:q,setCurrentAudioTime:F,error:me,isProcessingOnResize:Le,isProcessingStartRecording:Ne,_setIsProcessingAudioOnComplete:E,_setIsProcessingOnResize:le}}_.VoiceVisualizer=ct,_.useVoiceVisualizer=ot,Object.defineProperty(_,Symbol.toStringTag,{value:"Module"})});
